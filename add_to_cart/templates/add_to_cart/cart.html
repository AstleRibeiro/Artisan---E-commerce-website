{% extends "formative.html" %}
{% load static %}

{% block head %}
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>


    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="{% static 'master.css' %}">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flickity@2/dist/flickity.css">
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <script src="https://npmcdn.com/flickity@2/dist/flickity.pkgd.js"></script>


    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Kanit:200,400" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        .navbar{
         box-shadow: 0 0 1px #333;
  border-style: none;
  background: linear-gradient(180deg, #4B48ED 0%,#0078a8 100%);
  color: white;
  opacity: 0.9;
        }

        #popcart{
            margin-top: 9px;
            background: transparent;
            color: white; 
            border-style: none;
            text-decoration: none;
            box-shadow: none;
            margin-right: 10px;
            text-shadow: none;
        }

    </style>

{% endblock %}





{% block body_block %}



<!-- <div >
{% if painting|length < 1 %}
    <h4 class="jumbotron" style="margin-top:50px; text-align: center; " > ○ You have not added any product into your cart</h4>
{% else %}

        <h4 class="jumbotron" style="margin-top:50px; text-align: center; "> ○ Items that you have added to your cart</h4>

{% endif %}
</div>
 -->



<div class="container">
<div class="col" style="margin-top: 100px;">
  <h2>Step -1 </h2>
  <div >    <ul class="list-group" id="items">
    
  </ul>
<nav aria-label="breadcrumb">
<ol class="breadcrumb">
  <li >Your total cart value is <b> Rs. <span id="totalPrice"> </span></b> </li>
 
</ol>
</nav>

</div>

</div>

  <div class="col">
    <h2>Step-2</h2>

    <form method="post" action="/add_to_cart/add_to_cart/">
      {% csrf_token %}
      <input type="hidden" name="itemsJson" id="itemsJson">
      <input type="hidden" name="amount" id="amount">
 
  <div class="form-row"> 
   <div class="form-group col-md-6">
    <label for="inputFirstName">First Name</label>
      <input type="text" class="form-control" id="FirstName" name="first_name" placeholder="First Name">
    </div>
    <div class="form-group col-md-6">
      <label for="inputLastName">Last Name</label>
      <input type="text" class="form-control" id="LastName" name="last_name" placeholder="Last Name">
    </div>
  </div>



  <div class="form-row">
    <div class="form-group col-md-12">
      <label for="inputEmail4">Email</label>
      <input type="email" class="form-control" id="email" name="email" placeholder="Email">
    </div>
    
  </div>
  <div class="container">
  <div class="form-group">
    <label for="inputAddress">Address</label>
    <input type="text" class="form-control" id="address" name="address" placeholder="1234 Main St">
  </div>
  </div>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="inputCity">City</label>
      <input type="text" class="form-control" id="city" name="city">
    </div>
    <div class="form-group col-md-4">
      <label for="inputState">State</label>
      <select id="state" name="state" class="form-control">
        <option selected>Choose...</option>
        <option>...</option>
      </select>
    </div>
    <div class="form-group col-md-2">
      <label for="inputZip">Zip</label>
      <input type="text" class="form-control" id="zip" name="zip_code">
    </div>
  </div>
<div class="container">
<div class="form-group">
    
     
      <label class="inputZip">Phone Number</label>
       <input class="form-control" type="tel" id="phone" name="phone">
   
  </div>
  </div>

  <div class="form-group">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="gridCheck">
      <label class="form-check-label" for="gridCheck">
        Check me out
      </label>
    </div>
  </div>
  
  <button type="submit" class="btn btn-primary">Place Order</button>
</form>
  </div>
</div>

  

<!-- 
{% for i in painting %}
<div class="row">
    <div class="col-md-2">

    </div>
    <div class="col-md-2">
        <img src="/media/{{i.image}}" alt="The image cannot be displayed" width="150px" style="margin-left: 20px;">
    </div>
    <div class="col-md-6">
        <h1><b>{{i.name}}</b></h1>
        <h5><b>{{i.artist}}</b> </h5>
        <button  class="btn btn-danger btn-sm" type="submit" >Remove</button>
    </div>
    <div class="col-md-2">
        <h4 class="new" style="margin-top:20px;">Rs. {{i.price}}</h4>
    </div>
</div>
   <hr> -->
<!-- {% endfor %}
 -->



{% endblock %}




{% block js %}


<script type="text/javascript">


if(localStorage.getItem('demn') == null) {
  var demn = {};

}
else {
  demn = JSON.parse(localStorage.getItem('demn'));



}


console.log(demn);
sum = 0;
totalPrice = 0;
if ($.isEmptyObject(demn)) {
  mystr = `<h4> Your cart is empty </h4>`
  $('#items').append(mystr);

}
else {


for (item in demn) {

  let name = demn[item][1];
  let qty = demn[item][0];
  let itemPrice = demn[item][2];
  sum = sum + qty;
  totalPrice = totalPrice + qty * itemPrice;
  mystr = `<li  class="list-group-item d-flex justify-content-between align-items-center">
      ${name}
      <span class="badge badge-primary badge-pill">${qty}</span>

  </li>`
  $('#items').append(mystr);

}

}  


 document.getElementById('demn').innerHTML = sum;
 document.getElementById('totalPrice').innerHTML = totalPrice;
 $('#itemsJson').val(JSON.stringify(demn));
 {% if thank %}
 alert('Wohooo! Your order has been placed. Your order is {{id}}. Use it to track your order')
 localStorage.clear();

 document.location = "/dyna/dyna";

 {% endif %}

 $('#amount').val($('#totalPrice').html())

</script>
























{% endblock %}